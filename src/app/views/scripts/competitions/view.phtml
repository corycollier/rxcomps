<?php
/**
 * view view script
 *
 * This view script is for viewing a single competition record
 *
 * @category    RxCompetition
 * @package     App
 * @subpackage  View_Scripts
 * @copyright   Copyright (c) 2012 RxCompetition.com, Inc (http://www.RxCompetition.com)
 * @license     All Rights Reserved
 * @version     Release: 1.0.0
 * @since       File available since release 1.0.0
 */
?>

<?php
// echo a link back to the main event
echo $this->actionList(array(
    $this->backToEventLink($this->model, $this->request()->getParams()),
    $this->model(new App_Model_Competition)->create($this->user, 'Add Score', array(
        'event_id'  => $this->event()->id(),
        'competition_id'=> $this->model->id,
    )),
));

echo $this->competition($this->model)->item($this->user, array(
    'event_id'  => $this->event()->id(),
));

?>

<h2><?php echo $this->model->getValue('name'); ?></h2>
<p><?php echo strtr($this->model->getValue('description'), array(
    PHP_EOL => '</p><p>',
)); ?></p>
<p></p>

<h3>Leaderboards</h3>
<?php
// render the all-leaderboards action
echo $this->action('all-leaderboards', 'competitions', 'default', array_merge(
    $this->request()->getParams(),
    array('event_id' => $this->event()->id())
));

?>