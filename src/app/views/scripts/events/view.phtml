<?php
/**
 * view view script
 *
 * This view script is for viewing a single event record
 *
 * @category    RxCompetition
 * @package     App
 * @subpackage  View_Scripts
 * @copyright   Copyright (c) 2012 RxCompetition.com, Inc (http://www.RxCompetition.com)
 * @license     All Rights Reserved
 * @version     Release: 1.0.0
 * @since       File available since release 1.0.0
 */
?>

<h2><?php echo $this->model->getValue('name'); ?> (<?php
    echo $this->htmlAnchor('Register', array(
        'controller' => 'registrations',
        'action'    => 'create',
        'event_id'  => $this->model->id,

    )); ?>
)</h2>

<?php if ($this->auth()->hasIdentity()) : ?>
<?php echo $this->actionList(array(
    $this->htmlAnchor('Edit', array(
        'controller' => 'events',
        'action'    => 'edit',
        'event_id'  => $this->model->id,
    )),
    $this->htmlAnchor('Delete', array(
        'controller'    => 'events',
        'action'        => 'delete',
        'event_id'      => $this->model->id,
    )),
)); ?>

<?php endif; ?>

<p><?php echo $this->model->getValue('description'); ?></p>
<?php
    // store request params for use later
    $params = $this->request()->getParams();
?>

<div class="row">
    <div class="twelve columns">
        <section class="tabs">
            <ul class="tab-nav">
                <li><a href="#">Leaderboards</a></li>
                <li><a href="#">Competitions</a></li>
                <li><a href="#">Athletes</a></li>
                <li><a href="#">Registrations</a></li>
                <li><a href="#">Options</a></li>
            </ul>

            <div class="tab-content">
                <!-- LEADERBOARDS -->
                <h2>Leaderboards</h2>
                <?php echo $this->action(
                    'all', 'leaderboards', 'default', array_merge($params, array(
                        'event_id'  => $this->model->id,
                    ))
                ); ?>
            </div>

            <div class="tab-content active">
                <!-- COMPETITONS -->
                <h2>Competitions</h2>
                <?php echo $this->action(
                    'list', 'competitions', 'default', array_merge($params, array(
                        'event_id'  => $this->model->id,
                    ))
                ); ?>
            </div>

            <div class="tab-content">
                <!-- ATHLETES -->
                <h2>Athletes</h2>
                <?php echo $this->action(
                    'list', 'athletes', 'default', array_merge($params, array(
                        'event_id'  => $this->model->id,
                    ))
                ); ?>
            </div>

            <div class="tab-content">
                <!-- REGISTRATIONS -->
                <h2>Registrations</h2>
                <?php echo $this->action(
                    'list', 'registrations', 'default', array_merge($params, array(
                        'event_id'  => $this->model->id,
                    ))
                ); ?>
            </div>

            <div class="tab-content">
                <!-- EVENT OPTIONS -->
                <h2>Options</h2>
                <?php echo $this->action(
                    'list', 'event-options', 'default', array_merge($params, array(
                        'event_id'  => $this->model->id,
                    ))
                ); ?>
            </div>
        </section>
    </div>
</div>
