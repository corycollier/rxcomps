<?php
/**
 * view view script
 *
 * This view script is for viewing a single event record
 *
 * @category    RxCompetition
 * @package     App
 * @subpackage  View_Scripts
 * @copyright   Copyright (c) 2012 RxCompetition.com, Inc (http://www.RxCompetition.com)
 * @license     All Rights Reserved
 * @version     Release: 1.0.0
 * @since       File available since release 1.0.0
 */
?>

<h2><?php echo $this->model->getValue('name'); ?></h2>

<?php if ($this->auth()->hasIdentity()) : ?>
<?php echo $this->actionList(array(
    $this->htmlAnchor('Edit', array(
        'controller' => 'events',
        'action'    => 'edit',
        'event_id'  => $this->model->id,
    )),
    $this->htmlAnchor('Delete', array(
        'controller'    => 'events',
        'action'        => 'delete',
        'event_id'      => $this->model->id,
    )),
)); ?>

<?php endif; ?>

<p><?php echo $this->model->getValue('description'); ?></p>

<!-- LEADERBOARDS -->
<h2><?php echo $this->htmlAnchor('Leaderboards', array(
    'controller'=> 'leaderboards',
    'action' => 'view',
    'event_id' => $this->model->id,
)); ?>
</h2>

<section class="row">

    <!-- COMPETITONS -->
    <div class="row six columns">
        <h2>Competitions</h2>
        <?php echo $this->action('list', 'competitions', 'default', array(
            'event_id'  => $this->model->id,
        )); ?>
    </div>


    <!-- SCALES -->
    <div class="row six columns">
        <h2>Scales</h2>
        <?php echo $this->action('list', 'scales', 'default', array(
            'event_id'  => $this->model->id,
        )); ?>
    </div>

</section>

<!-- ATHLETES -->
<div class="row">

<?php if ($this->auth()->hasIdentity()) :?>
<?php echo $this->actionList(array(
    $this->htmlAnchor('Add Athlete', array(
        'controller'=> 'athletes',
        'action'    => 'create',
        'event_id'  => $this->model->id,
    )),
)); ?>
<?php endif; ?>

Filter by:
<?php echo $this->scaleFilter($this->request()->getParam('event_id')) ;?>
<?php echo $this->genderFilter($this->request()->getParam('event_id')); ?>

<?php foreach ($this->items as $event) : ?>

    <?php echo $this->athleteItem($event); ?>

<?php endforeach; ?>

</div>
